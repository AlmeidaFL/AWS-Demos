# AWS Lambda with DLQ (Dead Letter Queue) – Failure Simulation

This project demonstrates how to deploy an AWS Lambda function that intentionally throws an error, causing failed invocations to be redirected to an Amazon SQS queue configured as a Dead Letter Queue (DLQ).

This is useful for testing failure handling, alerting, and retry mechanisms.

---

## Requirements

- AWS CLI installed and configured (aws configure)
- Sufficient permissions to create resources

---

## Project Structure

```
lambda-dlq-demo/
├── lambda/                 # Lambda function source code
│   └── index.js
├── template.yaml           # CloudFormation template (with Transform: SAM)
├── packaged.yaml           # Generated by `cloudformation package` (ignored)
├── response.json           # Output from Lambda invoke (ignored)
├── .gitignore              # Excludes artifacts and local files
└── README.md               # Project instructions and documentation
```


---

## Step-by-Step Guide

### 1. Create an S3 Bucket (only once)

```bash
# S3 bucket is required
aws s3 mb unique-bucket-name --region your-region

# Ensure the `template.yaml` file is created before running this command.

# Package SAM template
aws cloudformation package --template-file template.yaml --s3-bucket unique-bucket-name --output-template-file packaged.yaml

# Deploy stack
aws cloudformation deploy --template-file packaged.yaml --stack-name lambda-dlq-demo --capabilities CAPABILITY_NAMED_IAM --region your-region

# Testing failure
aws lambda invoke --function-name FailingLambda --payload '{}' --invocation-type Event response.json

# Reading from queue
aws sqs receive-message --queue-url queue-url --max-number-of-messages 1

# Cleaning up stack
aws cloudformation delete-stack --stack-name lambda-dlq-demo

# (Optional) delete S3 bucket
```